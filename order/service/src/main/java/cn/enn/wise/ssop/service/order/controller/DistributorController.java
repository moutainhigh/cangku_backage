package cn.enn.wise.ssop.service.order.controller;

import cn.enn.wise.ssop.api.order.dto.request.DistributorBillsQueryParam;
import cn.enn.wise.ssop.api.order.dto.request.DistributorOrderQueryParam;
import cn.enn.wise.ssop.service.order.model.OrderBean;
import cn.enn.wise.ssop.service.order.model.OrderDataBean;
import cn.enn.wise.uncs.base.pojo.response.QueryData;
import cn.enn.wise.uncs.base.pojo.response.R;
import com.alibaba.fastjson.JSON;
import com.alibaba.fastjson.JSONObject;
import io.swagger.annotations.Api;
import io.swagger.annotations.ApiOperation;
import lombok.extern.slf4j.Slf4j;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.RequestBody;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RestController;

import java.util.ArrayList;
import java.util.List;

/**
 * @author anhui257@163.com
 */
@Slf4j
@RestController
@RequestMapping("/distributor")
@Api(value = "分销账单", tags = {"分销账单"})
public class DistributorController {
    /**
     * 分销账单
     * @param
     * @return
     */
    @ApiOperation(value = "分销账单",notes = "分销账单")
    @GetMapping("/orders")
    public R distributorBills(DistributorOrderQueryParam param){
        String data ="{        \"pageNum\": 1,                \"pageSize\": 10,                \"total\": 13,                \"external\": null,                \"records\": {            \"id\": null,                    \"frozenAmount\": 0.01,                    \"availableAmount\": 6.02,                    \"distributeOrders\": [            {                \"id\": 241,                    \"distributorId\": 31,                    \"orderId\": null,                    \"strategyId\": null,                    \"strategyItemId\": null,                    \"snapshot\": null,                    \"goodsId\": null,                    \"goodsName\": \"30分钟观光游（豪华游艇）\",                    \"goodsPrice\": 0.01,                    \"profit\": 1.00,                    \"contacts\": \"张超\",                    \"status\": 3,                    \"amount\": 1,                    \"orderPrice\": null,                    \"createTime\": \"2020-02-21 10:37:42\",                    \"createUserId\": null,                    \"createUserName\": null,                    \"updateTime\": null,                    \"updateUserId\": null,                    \"updateUserName\": null,                    \"roleId\": null,                    \"finishTime\": null,                    \"withdrawTime\": null,                    \"refundAmount\": null,                    \"checkAmount\": null,                    \"orderCode\": \"YT20020088test\",                    \"distributorCellphone\": null,                    \"distributorName\": null,                    \"projectCode\": null,                    \"projectName\": null,                    \"distributorMessage\": null            },            {                \"id\": 237,                    \"distributorId\": 31,                    \"orderId\": null,                    \"strategyId\": null,                    \"strategyItemId\": null,                    \"snapshot\": null,                    \"goodsId\": null,                    \"goodsName\": \"30分钟观光游（豪华游艇）\",                    \"goodsPrice\": 0.01,                    \"profit\": 2.00,                    \"contacts\": \"张超\",                    \"status\": 3,                    \"amount\": 2,                    \"orderPrice\": null,                    \"createTime\": \"2020-02-20 09:25:13\",                    \"createUserId\": null,                    \"createUserName\": null,                    \"updateTime\": null,                    \"updateUserId\": null,                    \"updateUserName\": null,                    \"roleId\": null,                    \"finishTime\": null,                    \"withdrawTime\": null,                    \"refundAmount\": null,                    \"checkAmount\": null,                    \"orderCode\": \"YT20020080test\",                    \"distributorCellphone\": null,                    \"distributorName\": null,                    \"projectCode\": null,                    \"projectName\": null,                    \"distributorMessage\": null            },            {                \"id\": 236,                    \"distributorId\": 31,                    \"orderId\": null,                    \"strategyId\": null,                    \"strategyItemId\": null,                    \"snapshot\": null,                    \"goodsId\": null,                    \"goodsName\": \"30分钟观光游（豪华游艇）\",                    \"goodsPrice\": 0.01,                    \"profit\": 1.00,                    \"contacts\": \"张超\",                    \"status\": 3,                    \"amount\": 1,                    \"orderPrice\": null,                    \"createTime\": \"2020-02-20 09:24:40\",                    \"createUserId\": null,                    \"createUserName\": null,                    \"updateTime\": null,                    \"updateUserId\": null,                    \"updateUserName\": null,                    \"roleId\": null,                    \"finishTime\": null,                    \"withdrawTime\": null,                    \"refundAmount\": null,                    \"checkAmount\": null,                    \"orderCode\": \"YT20020079test\",                    \"distributorCellphone\": null,                    \"distributorName\": null,                    \"projectCode\": null,                    \"projectName\": null,                    \"distributorMessage\": null            },            {                \"id\": 235,                    \"distributorId\": 31,                    \"orderId\": null,                    \"strategyId\": null,                    \"strategyItemId\": null,                    \"snapshot\": null,                    \"goodsId\": null,                    \"goodsName\": \"30分钟观光游（豪华游艇）\",                    \"goodsPrice\": 0.01,                    \"profit\": 1.00,                    \"contacts\": \"张超\",                    \"status\": 3,                    \"amount\": 1,                    \"orderPrice\": null,                    \"createTime\": \"2020-02-20 09:24:07\",                    \"createUserId\": null,                    \"createUserName\": null,                    \"updateTime\": null,                    \"updateUserId\": null,                    \"updateUserName\": null,                    \"roleId\": null,                    \"finishTime\": null,                    \"withdrawTime\": null,                    \"refundAmount\": null,                    \"checkAmount\": null,                    \"orderCode\": \"YT20020078test\",                    \"distributorCellphone\": null,                    \"distributorName\": null,                    \"projectCode\": null,                    \"projectName\": null,                    \"distributorMessage\": null            },            {                \"id\": 231,                    \"distributorId\": 31,                    \"orderId\": null,                    \"strategyId\": null,                    \"strategyItemId\": null,                    \"snapshot\": null,                    \"goodsId\": null,                    \"goodsName\": \"30分钟观光游（豪华游艇）\",                    \"goodsPrice\": 0.01,                    \"profit\": null,                    \"contacts\": \"张超\",                    \"status\": 6,                    \"amount\": 1,                    \"orderPrice\": null,                    \"createTime\": \"2020-02-17 17:18:01\",                    \"createUserId\": null,                    \"createUserName\": null,                    \"updateTime\": null,                    \"updateUserId\": null,                    \"updateUserName\": null,                    \"roleId\": null,                    \"finishTime\": null,                    \"withdrawTime\": null,                    \"refundAmount\": null,                    \"checkAmount\": null,                    \"orderCode\": \"YT20020070test\",                    \"distributorCellphone\": null,                    \"distributorName\": null,                    \"projectCode\": null,                    \"projectName\": null,                    \"distributorMessage\": null            },            {                \"id\": 230,                    \"distributorId\": 31,                    \"orderId\": null,                    \"strategyId\": null,                    \"strategyItemId\": null,                    \"snapshot\": null,                    \"goodsId\": null,                    \"goodsName\": \"30分钟观光游（豪华游艇）\",                    \"goodsPrice\": 0.01,                    \"profit\": null,                    \"contacts\": \"张超\",                    \"status\": 3,                    \"amount\": 1,                    \"orderPrice\": null,                    \"createTime\": \"2020-02-17 17:09:07\",                    \"createUserId\": null,                    \"createUserName\": null,                    \"updateTime\": null,                    \"updateUserId\": null,                    \"updateUserName\": null,                    \"roleId\": null,                    \"finishTime\": null,                    \"withdrawTime\": null,                    \"refundAmount\": null,                    \"checkAmount\": null,                    \"orderCode\": \"YT20020069test\",                    \"distributorCellphone\": null,                    \"distributorName\": null,                    \"projectCode\": null,                    \"projectName\": null,                    \"distributorMessage\": null            },            {                \"id\": 221,                    \"distributorId\": 31,                    \"orderId\": null,                    \"strategyId\": null,                    \"strategyItemId\": null,                    \"snapshot\": null,                    \"goodsId\": null,                    \"goodsName\": \"30分钟观光游（豪华游艇）\",                    \"goodsPrice\": 0.01,                    \"profit\": 1.00,                    \"contacts\": \"张超\",                    \"status\": 3,                    \"amount\": 1,                    \"orderPrice\": null,                    \"createTime\": \"2020-02-17 15:42:18\",                    \"createUserId\": null,                    \"createUserName\": null,                    \"updateTime\": null,                    \"updateUserId\": null,                    \"updateUserName\": null,                    \"roleId\": null,                    \"finishTime\": null,                    \"withdrawTime\": null,                    \"refundAmount\": null,                    \"checkAmount\": null,                    \"orderCode\": \"YT20020059test\",                    \"distributorCellphone\": null,                    \"distributorName\": null,                    \"projectCode\": null,                    \"projectName\": null,                    \"distributorMessage\": null            },            {                \"id\": 218,                    \"distributorId\": 31,                    \"orderId\": null,                    \"strategyId\": null,                    \"strategyItemId\": null,                    \"snapshot\": null,                    \"goodsId\": null,                    \"goodsName\": \"30分钟观光游（豪华游艇）\",                    \"goodsPrice\": 0.01,                    \"profit\": null,                    \"contacts\": \"张超\",                    \"status\": 6,                    \"amount\": 1,                    \"orderPrice\": null,                    \"createTime\": \"2020-02-17 15:33:04\",                    \"createUserId\": null,                    \"createUserName\": null,                    \"updateTime\": null,                    \"updateUserId\": null,                    \"updateUserName\": null,                    \"roleId\": null,                    \"finishTime\": null,                    \"withdrawTime\": null,                    \"refundAmount\": null,                    \"checkAmount\": null,                    \"orderCode\": \"YT20020056test\",                    \"distributorCellphone\": null,                    \"distributorName\": null,                    \"projectCode\": null,                    \"projectName\": null,                    \"distributorMessage\": null            },            {                \"id\": 217,                    \"distributorId\": 31,                    \"orderId\": null,                    \"strategyId\": null,                    \"strategyItemId\": null,                    \"snapshot\": null,                    \"goodsId\": null,                    \"goodsName\": \"30分钟观光游（豪华游艇）\",                    \"goodsPrice\": 0.01,                    \"profit\": null,                    \"contacts\": \"张超\",                    \"status\": 6,                    \"amount\": 2,                    \"orderPrice\": null,                    \"createTime\": \"2020-02-17 15:32:42\",                    \"createUserId\": null,                    \"createUserName\": null,                    \"updateTime\": null,                    \"updateUserId\": null,                    \"updateUserName\": null,                    \"roleId\": null,                    \"finishTime\": null,                    \"withdrawTime\": null,                    \"refundAmount\": null,                    \"checkAmount\": null,                    \"orderCode\": \"YT20020055test\",                    \"distributorCellphone\": null,                    \"distributorName\": null,                    \"projectCode\": null,                    \"projectName\": null,                    \"distributorMessage\": null            },            {                \"id\": 215,                    \"distributorId\": 31,                    \"orderId\": null,                    \"strategyId\": null,                    \"strategyItemId\": null,                    \"snapshot\": null,                    \"goodsId\": null,                    \"goodsName\": \"30分钟观光游（豪华游艇）\",                    \"goodsPrice\": 0.01,                    \"profit\": 0.01,                    \"contacts\": \"张超\",                    \"status\": 3,                    \"amount\": 1,                    \"orderPrice\": null,                    \"createTime\": \"2020-02-17 15:29:15\",                    \"createUserId\": null,                    \"createUserName\": null,                    \"updateTime\": null,                    \"updateUserId\": null,                    \"updateUserName\": null,                    \"roleId\": null,                    \"finishTime\": null,                    \"withdrawTime\": null,                    \"refundAmount\": null,                    \"checkAmount\": null,                    \"orderCode\": \"YT20020053test\",                    \"distributorCellphone\": null,                    \"distributorName\": null,                    \"projectCode\": null,                    \"projectName\": null,                    \"distributorMessage\": null            }            ]        }}";
        JSONObject object  = JSON.parseObject(data);
        return R.success(object);
    }

    /**
     * 分销订单（我的订单）
     * @param
     * @return
     */
    @ApiOperation(value = "分销订单",notes = "分销订单")
    @GetMapping("/bills")
    public R<QueryData<OrderBean>> distributorOrders(DistributorBillsQueryParam param){

        QueryData<OrderBean> result = new QueryData<>();
        result.setPageNo(1);
        result.setPageSize(10);
        result.setTotalCount(1);

        List<OrderBean> beans = new ArrayList<>();
        OrderBean orderBean = new OrderBean();
        orderBean.setAmount(100);
        orderBean.setCreateTime("2020-02-24 12:25:53");
        orderBean.setGoodsName("测试");
        orderBean.setGoodsPrice("13.02");
        orderBean.setIsCanRefund(50);
        orderBean.setIsDistributeOrder(1);
        orderBean.setName("名称");
        orderBean.setOrderCode("TK2202255");
        orderBean.setOrderType(1);
        orderBean.setPhone("15810633897");
        orderBean.setScenicName("大峡谷");
        orderBean.setShouldPay("50");
        orderBean.setSiglePrice(25.00);
        orderBean.setState(1);
        orderBean.setTimespan("18510633985");
        beans.add(orderBean);
        result.setRecords(beans);

        return R.success(result);
    }
}
